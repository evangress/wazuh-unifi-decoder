var SendSafelyZendeskI18n={translations:{DROPZONE_ZENDESK_WIDGET_INJECTED_TEXT:{"en-us":"\n\nThis ticket includes a secure attachment. Use this link to access the attached files:\n {url}",nl:"\nDit ticket bevat een veilige bijlage. Gebruik deze link voor toegang tot de bijgevoegde bestanden:\n {url}",fi:"\n\nTässä lomakkeessa on turvallinen liitetiedosto. Voit avata liitetiedostot tämän linkin kautta:\n {url}",fr:"\n\nCe ticket comprend une pièce jointe sécurisée. Utilisez ce lien pour accéder aux fichiers joints:\n {url}",de:"\n\nDieses Ticket enthält einen sicheren Anhang. Verwenden Sie diesen Link, um auf die angehängten Dateien zuzugreifen:\n {url}",es:"\n\nEste ticket incluye un adjunto seguro. Utilice este enlace para acceder a los archivos adjuntos:\n {url}",sv:"\n\nDet här ärendet innehåller ett säkert bifogat objekt. Använd följande länk för att komma åt bifogade filer:\n {url}","zh-cn":"\n\n该工单包含一个安全的附件。使用这个链接可以访问附件：\n {url}",ja:"\n\nこのチケットには安全な添付ファイルが含まれています。このリンクを使用して、添付ファイルにアクセスします:\n{url}"},DROPZONE_ZENDESK_WIDGET_CREATING_ENTROPY_MSG:{"en-us":"We need some random data to generate a key. Move your mouse quickly over the box above: {percent}%",nl:"We hebben willekeurige gegevens nodig om een sleutel aan te maken. Beweeg je muis snel heen en weer over het bovenstaande vak: {percent}%",fi:"Tarvitsemme tietoja avaimen luontia varten. Liikuta hiiren osoitinta yllä olevan laatikon päällä: {percent}%",fr:"Nous avons besoin de données aléatoires pour générer une clé. Déplacez votre souris rapidement sur la boîte ci-dessus: {percent}%",de:"Zum Erstellen eines Schlüssels werden Zufallsdaten benötigt. Bewegen Sie den Mauszeiger rasch über das oben dargestellte Feld: {percent}%",es:"Necesitamos datos aleatorios para generar una clave. Mueva el ratón rápidamente sobre el cuadro de arriba: {percent}%",sv:"Vi behöver lite slumpmässig data för att generera en nyckel. Flytta muspekaren snabbt över rutan ovan. {percent}%","zh-cn":"我们需要一些随机数据来生成密钥。请用鼠标快速扫过上方的方框。 {percent}%",ja:"キーを生成するためのランダムなデータが必要です。上のボックスの上で素早くマウスを動かしてください。 {percent}%"},DROPZONE_ZENDESK_WIDGET_DROPZONE_TEXT:{"en-us":"Drag files here or click to add a file",nl:"Sleep bestanden hiernaartoe of klik om een bestand toe te voegen",fi:"Siirrä tiedostot tänne tai lisää tiedosto napauttamalla",fr:"Faites glisser les fichiers ici ou cliquez pour ajouter un fichier.",de:"Ziehen Sie Dateien hierher oder klicken Sie, um eine Datei hinzuzufügen.",es:"Arrastre los archivos aquí o haga clic para añadir uno.",sv:"Dra filer hit eller klicka för att lägga till en fil","zh-cn":"将文件拖放到这里，或者点击添加文件",ja:"ファイルをここにドラッグするか、クリックしてファイルを追加"},DROPZONE_ZENDESK_WIDGET_FILES_NOT_DONE_WARNING:{"en-us":"Please wait until all files are done uploading",nl:"Wacht totdat alle bestanden zijn geüpload",fi:"Odota, kunnes tiedostot on siirretty",fr:"Veuillez patienter jusqu'à ce que tous les fichiers soient téléchargés.",de:"Dateien werden hochgeladen, bitte warten ...",es:"Espere a que terminen de subirse todos los archivos.",sv:"Vänta tills alla filer har laddats upp","zh-cn":"请等候文件完成上传",ja:"ファイルのアップロードが完了するまでお待ちください"},DROPZONE_ZENDESK_WIDGET_STILL_WORKING_MESSAGE:{"en-us":"Still working...wait a few seconds and try again.",nl:"Even geduld… wacht een paar seconden en probeer het opnieuw.",fi:"Yhä työn alla... odota hetki ja yritä uudelleen.",fr:"Travail en cours... Attendez encore quelques secondes et réessayez.",de:"Verarbeitung läuft ... Warten Sie einige Sekunden und versuchen Sie es dann noch einmal.",es:"Todavía no está listo, espere unos segundos y pruebe de nuevo.",sv:"Jobbar fortfarande... vänta några sekunder och försök igen.","zh-cn":"正在处理……请等候数秒后重试。",ja:"まだ作業中です。数秒待ってから再試行してください。"},DROPZONE_ZENDESK_WIDGET_FILE_COMPLETED_TEXT:{"en-us":"Completed",nl:"Voltooid",fi:"Valmis",fr:"Terminé",de:"Abgeschlossen",es:"Completado",sv:"Klart","zh-cn":"已完成",ja:"完了"},DROPZONE_ZENDESK_WIDGET_INITIALIZE_ERROR:{"en-us":"Failed to initialize Zendesk API",nl:"Zendesk-API niet geïnitialiseerd",fi:"Zendesk API:n käynnistys epäonnistui",fr:"Échec d'initialisation de l'API Zendesk",de:"Die Zendesk-API konnte nicht initialisiert werden",es:"Error al inicializar la API de Zendesk",sv:"Det gick inte att initiera Zendesk API","zh-cn":"Zendesk API初始化失败",ja:"Zendesk APIの初期化に失敗しました"},DROPZONE_ZENDESK_WIDGET_IMPROPERLY_FORMATTED_EMAIL:{"en-us":"Invalid email address",nl:"Ongeldig e-mailadres",fi:"Virheellinen sähköpostiosoite",fr:"Adresse e-mail non valide",de:"E-Mail-Adresse ungültig.",es:"Dirección de correo electrónico incorrecta",sv:"Ogiltig e-postadress","zh-cn":"电子邮箱无效",ja:"無効のメールアドレス"},DROPZONE_ZENDESK_WIDGET_SERVER_ERROR:{"en-us":"A server error has occurred: ({error}). Please try again.",nl:"Er is een serverfout opgetreden: ({error}). Probeer het opnieuw.",fi:"Kohtasimme palvelinvirheen: ({error}). Yritä uudelleen.",fr:"Une erreur serveur s'est produite : ({error}). Veuillez réessayer.",de:"Es ist ein Serverfehler aufgetreten: ({error}). Bitte versuchen Sie es erneut.",es:"Ha ocurrido un error: ({error}). Inténtalo de nuevo.",sv:"Ett serverfel har uppstått: ({error}). Försök igen.","zh-cn":"服务器发生错误：({error})。请重试。",ja:"サーバーエラーが発生しました：（{error}）。もう一度やり直してください。"},DROPZONE_ZENDESK_WIDGET_FILE_UPLOAD_NONE_TOOLTIP:{"en-us":"No file chosen",nl:"Geen bestand geselecteerd",fi:"Ei valittuja tiedostoja",fr:"Aucun fichier choisi",de:"Keine Datei ausgewählt",es:"Ningún archivo seleccionado",sv:"Ingen fil vald","zh-cn":"未选中文件",ja:"ファイルが選択されていません"},DROPZONE__JSP_DROPZONE_FORM_PREPARING_TO_UPLOAD:{"en-us":"Preparing to Upload...",nl:"Uploaden voorbereiden...",fi:"Siirtoa valmistellaan...",fr:"Préparation du transfert...",de:"Hochladen wird vorbereitet ...",es:"Preparando para subir...",sv:"Förbereder uppladdning ...","zh-cn":"正在准备上传...",ja:"アップロード準備中..."},DROPZONE_ZENDESK_WIDGET_SECURE_LINK_DISPLAY_TEXT:{"en-us":"Package ID# {packageID}",de:"Package ID# {packageID}",nl:"Package ID# {packageID}",fi:"Package ID# {packageID}",fr:"Package ID# {packageID}",es:"Package ID# {packageID}",sv:"Package ID# {packageID}","zh-cn":"Package ID# {packageID}",ja:"Package ID# {packageID}"}}};function SendSafelyDropzone(e,t,i){this.url="https://app.sendsafely.com",this.INJECTED_TEXT="\n\nThis ticket includes a secure attachment. Use this link to access the attached files:\n {url}",this.CREATING_ENTROPY_MSG="We need some random data to generate a key. Move your mouse quickly over the box above: {percent}%",this.FILE_ROW_STYLE="background: #F8F8F8; border-radius: 3px; clear: left; float: left; font-size: 11px; margin: 10px 0px 0px 0px; padding: 3px 10px; position: relative; overflow: hidden; width: 100%;",this.FILE_ROW_CLASSES="",this.PROGRESS_STYLE="background: rgba(0,0,0,0.04); bottom: 0; left: 0; position: absolute; right: 0; top: 0; -webkit-transition-property: width; -moz-transition-property: width; transition-property: width; -webkit-transition-duration: 0.5s; -moz-transition-duration: 0.5s; transition-duration: 0.5s; -webkit-transition-timing-function: linear; -moz-transition-timing-function: linear; transition-timing-function: linear; width: 3%;",this.PROGRESS_CLASSES="",this.UPLOAD_PERCENTAGE_STYLE="color: #888; float: right; font-weight: bold; margin-left: 15px; position: relative; z-index:1",this.UPLOAD_PERCENTAGE_CLASS="",this.FAILURE_CLASS="alert-danger",this.DROPZONE_TEXT="Drag files here or click to add file",this.DROPZONE_TEXT_MOBILE="Click here to attach a file or launch your device's camera.",this.FILES_NOT_DONE_WARNING="Please wait until all files are done uploading",this.STILL_WORKING_MESSAGE="Still working...wait a few seconds and try again.",this.PREPARING_TO_UPLOAD_TEXT="Preparing to Upload...",this.FILE_COMPLETED_TEXT="Completed",this.FAILURE_STYLE="padding: 7px; margin-bottom: 20px; margin-top: 10px; text-align: center; border: 1px solid transparent; border-radius: 4px; color: #a94442; background-color: #f2dede; border-color: #ebccd1; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box;",this.INFO_CLASS="alert-info",this.INFO_STYLE="padding: 7px; margin-bottom: 20px; margin-top: 10px; text-align: center; border: 1px solid transparent; border-radius: 4px; color: #8a6d3b; background-color: #fcf8e3; border-color: #faebcc; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box;",this.DROPZONE_STYLE="border: 2px dashed #F3F3F3; border-color: rgba(0,0,0,0.05); font-size: 14px; text-align: center; padding-top: 10px; padding-bottom: 10px;",this.BOXING_CSS="-webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box;",this.WIDTH="100%",this.HEIGHT="100%",this.BACKGROUND_COLOR="#ffffff",this.DROP_TEXT_COLOR="#666666",this.UPLOAD_API=void 0,this.logoPath="https://app-static.sendsafely.com/images/external/logo.png",this.ongoingUploadsCallback=function(){},this.apiKey=e,this.keyCodesUploaded=!1,this.disableAutoSubmit=!1,this.hasUploadedFiles=!1,this.packageIsFinalized=!1,this.nbrOfFilesAttached=0,this.noKeycodeUrl=void 0,this.unconfirmedSender=void 0,this.confirmedSenderToken=void 0,this.locale=void 0,this.dropZone=void 0,this.listenerTracker={},this.filePrefix=void 0,this.fileUploadedCallback=void 0;var a=this;function r(e){n({command:e})}function n(e){a.iframe.contentWindow.postMessage(e,a.createStaticURL(a.url))}function o(e){return jQuery("<div/>").text(e).html()}this.initialize=function(){a.isBrowserSupported()?(jQuery(window).off("message"),t.attr("style",""),t.removeClass(),a.createIFrameElement(t),a.iframe.onload=function(){var e={command:"api-key"},t=(e.key=a.apiKey,e.filePrefix=a.filePrefix,void 0!==a.UPLOAD_API&&(e.uploadAPI=a.UPLOAD_API),void 0!==a.locale&&""!==a.locale&&(e.locale=a.locale),n(e),setInterval(function(){n(e)},500));a.addFrameListener("api-key-received",function(e){clearInterval(t)}),a.addFrameListener("file-attached",function(e){a.nbrOfFilesAttached++,a.handleAttachedFile(e.name,e.fileId,e.packageCode)}),a.addFrameListener("file-attached-placeholder",function(e){a.handleAttachedFile(a.PREPARING_TO_UPLOAD_TEXT,e.fileId,e.packageCode)}),a.addFrameListener("file-progress",function(e){a.handleFileProgress(e.fileId,e.progress)}),a.addFrameListener("file-uploaded",function(e){a.packageCode=e.packageCode,a.fileUploaded(e.fileId),a.fileUploadedCallback&&a.fileUploadedCallback({fileId:e.fileId,fileName:e.fileName})}),a.addFrameListener("sendsafely.message.uploaded",function(e){a.packageCode=e.data.packageCode}),a.addFrameListener("file-removed",function(e){a.fileRemoved(e.fileId)}),a.addFrameListener("error",function(e){a.failure(e.message)}),a.addFrameListener("entropy",function(e){a.updateEntropy(e.entropy)}),a.addFrameListener("entropy-ready",function(){jQuery("#sendsafely-error-message").hasClass(a.INFO_CLASS)&&jQuery("#sendsafely-error-message").hide()}),a.addFrameListener("file-remove-error",function(e){a.fileRemovedFailed(e.fileId)}),a.addFrameListener("keycodes-uploaded",function(){a.keyCodesUploaded=!0}),a.addFrameListener("ongoing-uploads",function(e){a.ongoingUploadsCallback(e.ongoingUploads)}),a.addFrameListener("set-unconfirmed-sender",function(e){a.setUnconfirmedSender(e.unconfirmedSender)}),a.addFrameListener("set-confirmed-sender-token",function(e){a.setConfirmedSenderToken(e.confirmedSenderToken)})},!0!==a.disableAutoSubmit&&jQuery("form").submit(function(e){var t;0<a.nbrOfFilesAttached&&!a.packageIsFinalized&&(t=jQuery(this),null!=a.unconfirmedSender&&this.setUnconfirmedSender(a.unconfirmedSender),null!=a.confirmedSenderToken&&this.setConfirmedSenderToken(a.confirmedSenderToken),a.finalizePackage(function(e){var n=(n=a.INJECTED_TEXT).replace("{url}",e);i.val(function(e,t){return t+n}),t.submit()}),e.preventDefault())})):a.browserIsNotSupported()},this.isBrowserSupported=function(){return"undefined"!=typeof Blob&&"undefined"!=typeof Worker&&"undefined"!=typeof XMLHttpRequest},this.browserIsNotSupported=function(){},this.updateEntropy=function(e){jQuery("#sendsafely-error-message").removeClass(a.FAILURE_CLASS+" "+a.INFO_CLASS),jQuery("#sendsafely-error-message").addClass(a.INFO_CLASS),jQuery("#sendsafely-error-message").attr("style",a.INFO_STYLE),jQuery("#sendsafely-error-message").show();var t=(t=a.CREATING_ENTROPY_MSG).replace("{percent}",Math.round(e));jQuery("#sendsafely-error-message").text(t)},this.failure=function(e){e=void 0===e?"An unknown error occurred.":e;jQuery("#upload-item-placeholder").remove(),jQuery("#sendsafely-error-message").removeClass(a.FAILURE_CLASS+" "+a.INFO_CLASS),jQuery("#sendsafely-error-message").addClass(a.FAILURE_CLASS),jQuery("#sendsafely-error-message").attr("style",a.FAILURE_STYLE),jQuery("#sendsafely-error-message").text(e),jQuery("#sendsafely-error-message").show(),setTimeout(function(){jQuery("#sendsafely-error-message").hide()},5e3)},this.fileUploaded=function(e){var t=jQuery('li[data-upload-item="'+e+'"]');t.attr("aria-busy","false"),t.find("a[data-upload-link]").attr("href","https://www.sendsafely.com"),t.find("p[data-upload-path]").append("https://www.sendsafely.com"),t.find("div[data-upload-progress]").css("width","100%"),jQuery('li[data-upload-id="'+e+'"] span[data-upload-remove]').show(),jQuery('li[data-upload-id="'+e+'"] span[data-upload-percentage]').text(a.FILE_COMPLETED_TEXT)},this.handleAttachedFile=function(e,t,n){a.packageCode=n;n="";n+="<li"+(t?" ":' id="upload-item-placeholder" ')+'class="sendsafely-upload-item '+a.FILE_ROW_CLASSES+'" data-upload-id="'+o(t)+'" style="'+a.FILE_ROW_STYLE+" "+a.BOXING_CSS+'"><img src="'+a.createPadlockImage()+'" width="14px" height="14px" style=""/><div style="vertical-align: top; display: inline; margin-top:2px;">&nbsp;'+o(e)+'</div><span data-upload-remove="" style="color: #888; cursor: pointer; float: right; font-weight: bold; margin-left: 15px; position: relative; z-index:1;">x</span><span data-upload-percentage="" class="'+a.UPLOAD_PERCENTAGE_CLASS+'" style="'+a.UPLOAD_PERCENTAGE_STYLE+'"></span><div class="'+a.PROGRESS_CLASSES+'" data-upload-progress="" style="'+a.PROGRESS_STYLE+'"></div></li>',jQuery("#sendsafely-attached-file-list").append(n),t&&(jQuery("#upload-item-placeholder").remove(),jQuery('li[data-upload-id="'+t+'"] span[data-upload-remove]').click(function(){a.removeFile(jQuery(this))}))},this.removeFile=function(e){e=e.parent().data("upload-id");n({command:"remove-file",fileId:e}),jQuery('li[data-upload-id="'+e+'"] span[data-upload-remove]').unbind("click")},this.fileRemoved=function(e){a.nbrOfFilesAttached--,jQuery('li[data-upload-id="'+e+'"] span[data-upload-remove]').parent().remove()},this.fileRemovedFailed=function(e){jQuery('li[data-upload-id="'+e+'"] span[data-upload-remove]').click(function(){a.removeFile(jQuery(this))})},this.handleFileProgress=function(e,t){jQuery('li[data-upload-id="'+e+'"] div[data-upload-progress]').css("width",t+"%"),parseFloat(t)<=100&&jQuery('li[data-upload-id="'+e+'"] span[data-upload-percentage]').text()!==a.FILE_COMPLETED_TEXT&&jQuery('li[data-upload-id="'+e+'"] span[data-upload-percentage]').text(parseFloat(t).toFixed(2)+"%")},this.addMessage=function(e){n({command:"set-message",message:e}),a.hasMessage=!0},this.setUnconfirmedSender=function(e){n({command:"set-unconfirmed-sender",unconfirmedSender:e})},this.setRecaptchaToken=function(e){n({command:"set-recaptcha-token",recaptchaToken:e})},this.setConfirmedSenderToken=function(e){n({command:"set-confirmed-sender-token",confirmedSenderToken:e})},this.createStaticURL=function(e){return e.indexOf("https://static-")<0&&0<=e.indexOf("https://")?e=e.replace("https://","https://static-"):e.indexOf("http://static-")<0&&0<=e.indexOf("http://")&&(e=e.replace("http://","http://static-")),e},this.finalizePackage=function(t,n){a.hasOngoingUploads(function(e){a.listenerTracker.hasOwnProperty("error")||(a.listenerTracker.error=!0,a.addFrameListener("error",function(e){void 0!==n&&n()})),!e&&void 0!==a.packageCode&&a.keyCodesUploaded||a.hasMessage&&!e?(a.listenerTracker.hasOwnProperty("package-link")||(a.listenerTracker["package-link"]=!0,a.addFrameListener("package-link",function(e){a.packageIsFinalized=!0,a.noKeycodeUrl=e.noKeycodeUrl,t(e.url)})),r("finalize")):(e||void 0===a.packageCode?a.failure(a.FILES_NOT_DONE_WARNING):(a.failure(a.STILL_WORKING_MESSAGE),a.sendFeedback("DZ upload error: Waiting for keycode encryptions to complete - "+a.apiKey)),void 0!==n&&n())})},this.hasOngoingUploads=function(e){a.ongoingUploadsCallback=e,r("has-ongoing-uploads")},this.addFrameListener=function(t,n){jQuery(window).on("message",function(e){e.originalEvent.data.command==t&&(n(e.originalEvent.data),e.stopPropagation())})},this.createIFrameElement=function(e){var t='<div style="position: relative; width: '+a.WIDTH+"; height: "+a.HEIGHT+'"><div id="sendsafely-iframe" style="position: absolute; top: 0; left: 0; width:100%; height:100%; z-index: 10;"></div><div id="sendsafely-dropzone" style="position: absolute; top: 0; left: 0; width: 100%; height:100%; overflow: hidden; position: relative; z-index: 1;">'+a.renderDropzone()+"</div></div>",n=document.createElement("IFRAME"),t=(n.setAttribute("src",a.createStaticURL(a.url)+"/html/dropzone.html"),n.style.width="100%",n.style.height="100%",n.seamless="seamless",n.scrolling="no",e.html(t),jQuery("#sendsafely-iframe").html(n),jQuery("#sendsafely-iframe").css("filter","alpha(opacity=0)"),jQuery("#sendsafely-iframe").css("opacity","0.01"),'<div id="sendsafely-error-message" class="alert alert-dismissible" role="alert" style="display:none; margin-top:5px; '+a.BOXING_CSS+'"></div>');e.append('<div><ul id="sendsafely-attached-file-list" style="margin: 0; overflow: hidden; padding: 0;"></ul></div>'+t),a.iframe=n},this.addDocumentEventHandlers=function(){document.getElementById("sendsafely-iframe").addEventListener("dragover",a.handleDragOverDropzone,!1),document.getElementById("sendsafely-iframe").addEventListener("dragleave",a.handleDragLeaveDropzone,!1)},this.handleDragOverDropzone=function(e){e.dataTransfer.dropEffect="copy",jQuery("#sendsafely-dropzone").css("border","2px dashed black")},this.handleDragLeaveDropzone=function(e){jQuery("#sendsafely-dropzone").css("border","2px dashed #F3F3F3")},this.renderDropzone=function(){var e=a.DROPZONE_TEXT;return'<div style="width: 100%; '+a.DROPZONE_STYLE+"; color: "+a.DROP_TEXT_COLOR+"; background-color: "+a.BACKGROUND_COLOR+" "+a.BOXING_CSS+'" align="center"><div style="margin: 0 auto; float:center; min-width: 45%; max-width: 95%; display: inline-block;"><span><img src="'+a.logoPath+'" width="23px" height="23px" style="margin-right:5px; margin-top: -2px;vertical-align: middle;"></img></span><span>'+e+"</span></div></div>"},this.sendFeedback=function(e){var t=new EventHandler(a);new SendFeedback(t,new AnonymousRequest(t,a.url,a.apiKey)).execute(e,void 0,!0)},this.createPadlockImage=function(){return a.logoPath}}function SendSafelyZendesk(e){var o=this;function t(){document.querySelector(".g-recaptcha")&&$(".g-recaptcha")[0].setAttribute("data-callback","SendSafelyCaptchaIntercept"),"undefined"!=typeof grecaptcha&&("function"==typeof grecaptcha.reset?grecaptcha.reset():grecaptcha.enterprise&&"function"==typeof grecaptcha.enterprise.reset&&grecaptcha.enterprise.reset()),o.$newTicketSubmit.prop("disabled",!1),o.$replySubmit.prop("disabled",!1)}function n(e){return/^.+@([\w\-]+\.)+[A-Z]{2,20}$/gi.test(e)}function i(e){var t="";return(t+=e)+("\nURL: "+window.location.href)+"\nInternal Parameters: "+("\n$newTicketSubmit = "+o.$newTicketSubmit.length)+("\n$newRequestForm = "+o.$newRequestForm.length)+("\n$urlElement = "+o.$urlElement.length)+("\n$replyUrlElement = "+o.$replyUrlElement.length)+("\n$replySubmit = "+o.$replySubmit.length)+("\n$replyUrlElement = "+o.$replyUrlElement.length)}this.$urlElement=$("#request_description"),this.$replyUrlElement=$("#request_comment_body"),this.$replyCommentContainer=$(".comment-show-container"),this.$newRequestForm=$("#new_request"),this.$replyForm=$(".comment-form"),this.$replySubmit=$(".comment-form [name='commit']"),this.$newTicketSubmit=$("#new_request [name='commit']"),this.$elemToOverride=$("#upload-dropzone"),this.$unconfirmedSenderElement=$("#request_anonymous_requester_email"),this.packageSubmitted=!1,this.UPLOAD_API="ZENDESK_DROP_ZONE",this.defaultLocale="en-us",this.INITIALIZE_ERROR="Failed to initialize Zendesk API",this.VALIDATION_ERROR="Initial Zendesk Check failed. Trying to resolve",this.formattedLink=!1,o.api=new SendSafelyDropzone(e,o.$elemToOverride,o.$urlElement),o.api.HEIGHT="52px",o.api.WIDTH="auto",this.initialize=function(){var e;"undefined"!=typeof I18N&&void 0!==SendSafelyZendeskI18n.translations.DROPZONE_ZENDESK_WIDGET_INJECTED_TEXT[I18N.locale]?(o.api.locale=I18N.locale,o.api.DROPZONE_TEXT=SendSafelyZendeskI18n.translations.DROPZONE_ZENDESK_WIDGET_DROPZONE_TEXT[I18N.locale],o.api.INJECTED_TEXT=SendSafelyZendeskI18n.translations.DROPZONE_ZENDESK_WIDGET_INJECTED_TEXT[I18N.locale],o.api.CREATING_ENTROPY_MSG=SendSafelyZendeskI18n.translations.DROPZONE_ZENDESK_WIDGET_CREATING_ENTROPY_MSG[I18N.locale],o.api.FILES_NOT_DONE_WARNING=SendSafelyZendeskI18n.translations.DROPZONE_ZENDESK_WIDGET_FILES_NOT_DONE_WARNING[I18N.locale],o.api.STILL_WORKING_MESSAGE=SendSafelyZendeskI18n.translations.DROPZONE_ZENDESK_WIDGET_STILL_WORKING_MESSAGE[I18N.locale],o.api.FILE_COMPLETED_TEXT=SendSafelyZendeskI18n.translations.DROPZONE_ZENDESK_WIDGET_FILE_COMPLETED_TEXT[I18N.locale],o.INITIALIZE_ERROR=SendSafelyZendeskI18n.translations.DROPZONE_ZENDESK_WIDGET_INITIALIZE_ERROR[I18N.locale],o.api.PREPARING_TO_UPLOAD_TEXT=SendSafelyZendeskI18n.translations.DROPZONE__JSP_DROPZONE_FORM_PREPARING_TO_UPLOAD[I18N.locale],o.api.SECURE_LINK_DISPLAY_TEXT=SendSafelyZendeskI18n.translations.DROPZONE_ZENDESK_WIDGET_SECURE_LINK_DISPLAY_TEXT[I18N.locale]):(o.api.locale=o.defaultLocale,"undefined"==typeof I18N&&o.api.sendFeedback("Zendesk I18N is undefined, defaulting to "+o.defaultLocale+" URL: "+window.location.href),o.api.DROPZONE_TEXT=SendSafelyZendeskI18n.translations.DROPZONE_ZENDESK_WIDGET_DROPZONE_TEXT[o.defaultLocale],o.api.INJECTED_TEXT=SendSafelyZendeskI18n.translations.DROPZONE_ZENDESK_WIDGET_INJECTED_TEXT[o.defaultLocale],o.api.CREATING_ENTROPY_MSG=SendSafelyZendeskI18n.translations.DROPZONE_ZENDESK_WIDGET_CREATING_ENTROPY_MSG[o.defaultLocale],o.api.FILES_NOT_DONE_WARNING=SendSafelyZendeskI18n.translations.DROPZONE_ZENDESK_WIDGET_FILES_NOT_DONE_WARNING[o.defaultLocale],o.api.STILL_WORKING_MESSAGE=SendSafelyZendeskI18n.translations.DROPZONE_ZENDESK_WIDGET_STILL_WORKING_MESSAGE[o.defaultLocale],o.api.FILE_COMPLETED_TEXT=SendSafelyZendeskI18n.translations.DROPZONE_ZENDESK_WIDGET_FILE_COMPLETED_TEXT[o.defaultLocale],o.INITIALIZE_ERROR=SendSafelyZendeskI18n.translations.DROPZONE_ZENDESK_WIDGET_INITIALIZE_ERROR[o.defaultLocale],o.api.PREPARING_TO_UPLOAD_TEXT=SendSafelyZendeskI18n.translations.DROPZONE__JSP_DROPZONE_FORM_PREPARING_TO_UPLOAD[o.defaultLocale],o.api.SECURE_LINK_DISPLAY_TEXT=SendSafelyZendeskI18n.translations.DROPZONE_ZENDESK_WIDGET_SECURE_LINK_DISPLAY_TEXT[o.defaultLocale]),window.SendSafelyCaptchaIntercept=o.captchaIntercept,t(),(o.$newTicketSubmit.length||o.$urlElement.length||o.$replyUrlElement.length)&&((()=>{var e=(()=>{var e=o.$newTicketSubmit.length,t=o.$newRequestForm.length,n=o.$urlElement.length;return t&&e&&n})(),t=!1;return e||(t=(()=>{var e=o.$replyUrlElement.length,t=o.$replySubmit.length,n=o.$replyUrlElement.length;return e&&t&&n})()),e||t||(e=i(o.VALIDATION_ERROR),o.api.sendFeedback(e),((()=>{for(var e=$("form"),t=0;t<e.length;t++){var n=$(e[t]),i="/hc/en-us/requests"===n.attr("action"),a="new_request"===n.attr("id"),r=n.hasClass("request-form");if(n.find('input[type="file"]').length&&(i||a||r))return 1}})()?()=>{for(var e=$("form"),t=0;t<e.length;t++){var n=$(e[t]),i=((e,t)=>-1!==t.indexOf(e,t.length-e.length))("/requests",n.attr("action")),a="new_request"===n.attr("id"),r=n.hasClass("request-form");if(n.find('input[type="file"]').length&&(i||a||r))return o.$newRequestForm=n,o.$newTicketSubmit=n.find('input[type="submit"]'),o.$urlElement=n.find("textarea"),1}}:()=>{for(var e=$("form"),t=0;t<e.length;t++){var n=$(e[t]),i=0===n.attr("action").indexOf("/hc/en-us/requests"),a=!1,r=(void 0!==n.attr("id")&&(a=0===n.attr("id").indexOf("edit_request_")),n.hasClass("edit_request"));if(n.find('input[type="file"]').length&&(i||a||r))return o.$replySubmit=n.find('input[type="submit"]'),o.$replyForm=n,o.$replyUrlElement=n.find("textarea"),1}})())})()?($("#request-attachments-pool").hide(),o.api.disableAutoSubmit=!0,o.INJECTED_TEXT=o.api.INJECTED_TEXT,o.api.UPLOAD_API=o.UPLOAD_API,o.$newTicketSubmit.prop("disabled",!1),document.querySelector(".g-recaptcha")||o.$newTicketSubmit.click(function(e){e.preventDefault(),o.$newTicketSubmit.prop("disabled",!0),o.handleSubmit(o.$urlElement,function(){o.$newRequestForm.submit()})}),o.$replyCommentContainer.click(function(e){"undefined"!=typeof tinymce&&tinymce.activeEditor?tinymce.activeEditor.on("focus",function(e){o.setupReplySubmit()}):null!==document.querySelector(".ck-editor__editable")?o.setupReplySubmit():null===document.querySelector(".ck-editor__editable")?console.log("Zendesk ckeditor is undefined replyCommentContainer"):console.log("Zendesk tinymce is undefined replyCommentContainer")}),o.$replyUrlElement.focus(function(){o.setupReplySubmit()}),o.$replySubmit.is(":visible")&&o.setupReplySubmit(),o.api.initialize(),setTimeout(function(){["div[role=toolbar] input[type=file]",".ck-file-dialog-button input"].forEach(function(e){e=document.querySelector(e);e&&(e.disabled=!0)}),[".wysiwyg-icon-image",".ck-file-dialog-button"].forEach(function(e){e=document.querySelector(e);e&&(e.style.display="none")})},500)):(e=i(o.INITIALIZE_ERROR),o.api.sendFeedback(e)))},this.setupReplySubmit=function(){o.$replySubmit.prop("disabled",!1),o.$replySubmit.unbind("click"),o.$replySubmit.click(function(e){e.preventDefault(),o.$replySubmit.prop("disabled",!0),o.handleSubmit(o.$replyUrlElement,function(){o.$replyForm.submit()})})},this.captchaIntercept=function(){o.handleSubmit(o.$urlElement,function(){void 0!==invisibleRecaptchaSubmit()?invisibleRecaptchaSubmit():console.log("invisibleRecaptchaSubmit undefined")})},this.handleSubmit=function(a,r){if(0<o.api.nbrOfFilesAttached){if(!o.packageSubmitted){try{if(null!==HelpCenter.user.email){if(!n(HelpCenter.user.email))return alert("Email: "+HelpCenter.user.email+" is not properly formatted"),void t();o.api.setUnconfirmedSender(HelpCenter.user.email)}}catch(e){}if(o.$unconfirmedSenderElement.length&&null!=o.$unconfirmedSenderElement.val()){if(!n(o.$unconfirmedSenderElement.val()))return alert("Email: "+o.$unconfirmedSenderElement.val()+" is not properly formatted"),void t();o.api.setUnconfirmedSender(o.$unconfirmedSenderElement.val())}o.packageSubmitted=!0,o.api.finalizePackage(function(e){var t,n=o.INJECTED_TEXT,i=(n=n.replace("{url}",e),a.val(function(e,t){return t+n}),document.querySelector(".ck-editor__editable"));"undefined"!=typeof tinymce&&tinymce.activeEditor||null!==i?(n=(n=!0===o.formattedLink?(t=new RegExp("thread=[A-Za-z0-9-_]+").exec(e).toString().substr(7),o.SECURE_LINK_DISPLAY_TEXT=o.api.SECURE_LINK_DISPLAY_TEXT.replace("{packageID}",t),n.replace(e,'<a parget="_blank"  href="'+e+'" rel="noreferrer">'+o.SECURE_LINK_DISPLAY_TEXT+"</a>")):n.replace(e,'<a target="_blank"  href="'+e+'" rel="noreferrer">'+e+"</a>")).replace(/\n/g,"<br>"),null!==i&&null!==i.ckeditorInstance?(i=(t=i.ckeditorInstance).data.processor.toView(n),i=t.data.toModel(i),t.model.insertContent(i)):(tinymce.get($(a).attr("id")).selection.select(tinymce.get($(a).attr("id")).getBody(),!0),tinymce.get($(a).attr("id")).selection.collapse(!1),tinymce.get($(a).attr("id")).execCommand("mceInsertContent",!1,n))):null===document.querySelector(".ck-editor__main")?console.log("Zendesk ckeditor is undefined replyCommentContainer"):console.log("Zendesk tinymce is undefined replyCommentContainer"),r(e)},function(){o.packageSubmitted=!1,t()})}}else o.api.hasOngoingUploads(function(e){(e?t:r)()})}}function AnonymousRequest(e,t,n,r){var o=this;this.apiPrefix="/drop-zone/v2.0",this.url=t,this.apiKey=n,this.eventHandler=e,this.locale=void 0,this.sendRequest=function(e,t,n){void 0===n&&(n=!0);var i={"ss-api-key":o.apiKey,"ss-request-api":r};return null!=this.locale&&(0<this.locale.indexOf("_")&&(this.locale=this.locale.replace("_","-")),i["Accept-Language"]=this.locale),$.ajax({url:o.url+o.apiPrefix+e.url,type:e.HTTPMethod,timeout:25e3,data:null==t?null:JSON.stringify(t),contentType:e.mimetype,headers:i,crossDomain:!0,async:n,retryCount:2})},this.getHTTPObjForFileUpload=function(e,t,n,i){var a=new XMLHttpRequest,e=o.url+o.apiPrefix+e;return a.open("POST",e,i),a.setRequestHeader("Content-Type","multipart/form-data; boundary="+n),a.setRequestHeader("ss-api-key",o.apiKey),a.setRequestHeader("ss-request-api",r),a},this.extend=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}}function ResponseParser(e){this.eventHandler=e,this.defaultEventError="sendsafely.error";var a=this;this.processAjaxData=function(e,t,i){e.fail(function(e,t,n){n={response:this.AJAX_ERROR,message:n.message};a.raiseError(i,{error:this.NETWORK_ERROR,data:n})}).done(function(e){"SUCCESS"==(e="string"==typeof e?JSON.parse(e):e).response?null!=t&&t(e):"TIMEOUT"==e.response?a.eventHandler.raise("session.timeout",e.message):a.raiseError(i,{error:e.response,data:e})})},this.processAjaxDataRaw=function(e,i,t){e.fail(function(e,t,n){n="string"==typeof n?n:n.message;i({response:"AJAX_ERROR",message:"A server error has occurred ("+n+"). Please try again."})}).done(function(e){"string"==typeof e&&(e=JSON.parse(e)),i(e)})},this.raiseError=function(e,t){a.eventHandler.raiseError(t.error,t.data.message,e)}}function EventHandler(e){var r=this;this.eventlist={},this.ERROR_EVENT="sendsafely.error",void 0!==e&&(e.on=function(e,t){return r.bind(e,t)},e.unbind=function(e,t){r.unbind(e,t)},e.isBound=function(e){r.isBound(e)}),this.bind=function(e,t){var n=r.getList(e);return n.push(t),(r.eventlist[e]=n).length-1},this.unbind=function(e,t){var n=r.getList(e);void 0===t?n=void 0:n.length>t&&(n[t]=void 0),r.eventlist[e]=n},this.isBound=function(e){return void 0!==r.eventlist[e]&&0<r.eventlist[e].length},this.raise=function(e,t){if(void 0!==r.eventlist[e])for(var n=r.eventlist[e].length,i=0;i<n&&void 0!==r.eventlist[e];){var a=r.eventlist[e][i];null!=a&&a(t),i++}},this.raiseError=function(t,n,e){void 0!==e&&void 0!==r.eventlist[e]?r.eventlist[e].forEach(function(e){null!=e&&e(t,n)}):void 0!==r.eventlist[r.ERROR_EVENT]&&r.eventlist[r.ERROR_EVENT].forEach(function(e){void 0!==e&&e(t,n)})},this.getList=function(e){return void 0===r.eventlist[e]&&(r.eventlist[e]=[]),r.eventlist[e]}}function SendFeedback(e,t){this.request=t,this.endpoint={url:"/feedback/",HTTPMethod:"PUT",mimetype:"application/json"},this.eventHandler=e,this.customErrorEvent="send.feedback.failed",this.responseParser=new ResponseParser(e);var o=this;this.execute=function(e,t,n,i){var a,r=o.request.extend({},o.endpoint),e=(t=t,(a={}).message=e,a.stacktrace=t,a),t=o.request.sendRequest(r,e,n);o.responseParser.processAjaxData(t,function(e){i&&i()})}}