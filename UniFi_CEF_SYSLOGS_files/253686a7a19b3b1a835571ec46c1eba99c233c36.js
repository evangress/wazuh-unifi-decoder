$.when($.ready).then((async()=>{const e=$(".article-details__updated").text().split(" ")[0],t=`Updated on ${new Date(e).toLocaleString("default",{day:"numeric",month:"short",year:"numeric"})}`;if($(".article-details__updated").text(t),$(".collapsible--header").on("click",(function(){$(this).toggleClass("rotate"),$(this).parent().children(".collapsible--body").toggleClass("active")})),$(".this-trigger, .article-tabs__header-title").on("click",(function(){if($(this).hasClass(".active"))return;const e=$(this).attr("data-target");$(this).addClass("active").siblings().removeClass("active"),$(`.content-id--${e}, #${e}`).addClass("active").siblings().removeClass("active")})),$(".copyable").wrap('<div class="copyable-wrapper"></div>'),$('<button class="button-secondary copyable-button">Copy</button>').insertBefore(".copyable"),$(".copyable-button").on("click",(function(){const e=$(this).next().html().replace(/<br\s*[/]?>/gi,"\r\n");navigator.clipboard.writeText(e),$(this).text("Copied")})),$(".copyable").on("click",(function(){if(window.outerWidth<800){const e=/<br\s*[/]?>/gi,t=$(this).html().replace(e,"\r\n");navigator.clipboard.writeText(t)}})),$(window).on("scroll",(function(){$("body, html").is(":animated")||$(".article-sidebar__nav-element").each(((e,t)=>{t.classList.remove("click-scroll")}));let e="";$(".article-body h2, .article-body h3").each((function(){const t=$(this).offset().top,a=$(window).scrollTop(),i=$(window).height(),r=t-a,l=$(this).attr("id");if(r>=0&&r<i)return e=l,!1})),$(".article-sidebar__nav-element").each(((t,a)=>{const i=a.getAttribute("id"),r=`button-${e}`;if($(window).scrollTop()+$(window).height()>=$(document).height()-10){if(a.classList.contains("click-scroll"))return $(".article-sidebar__nav-element").each(((e,t)=>{t.classList.remove("active-nav")})),a.classList.add("active-nav"),!1;i===r?a.classList.add("active-nav"):a.classList.remove("active-nav")}else i===r?a.classList.add("active-nav"):a.classList.remove("active-nav")}))})),$("#button-title").on("click",(()=>$("body, html").animate({scrollTop:0},800))),$(".article-body h2, .article-body h3").each(((e,t)=>{const a=t.textContent;t.setAttribute("id",`${e}`);const i="H3"===t.nodeName,r=`#${e}`;$(".article-sidebar__nav").append(`<button class="article-sidebar__nav-element${i?" sub-title":""}" id="button-${e}"><span>${a}</span></button>`),$(`#button-${e}`).on("click",(()=>{const t=$(`${r}`).offset().top-60,a=$(window).scrollTop(),i=$(window).scrollTop()+$(window).height(),l=$(document).height()-10;$("body, html").animate({scrollTop:t},800),i>=l&&t>a&&($(".active-nav").removeClass("active-nav"),$(`#button-${e}`).addClass("active-nav")),$(".article-sidebar__nav-element").each(((e,t)=>{t.classList.remove("click-scroll")})),$(`#button-${e}`).hasClass("click-scroll")||$(`#button-${e}`).addClass("click-scroll")}))})),$(".article-sidebar__nav").children().length>0?$(".article-sidebar__nav-heading").html("<h2>Table of Contents</h2>"):($(".article-sidebar__nav").css("display","none"),$(".article-sidebar__nav-heading").css("display","none")),$(".article-sidebar__related").children().length>0||0!==$("#articles-to-feature").length||$(".article-sidebar__related").css("display","none"),$("#articles-to-feature").length>0){const e=$("#articles-to-feature").children();$(".article-sidebar__related").html("<h2>Related Articles</h2>"),e.each(((e,t)=>{$(t).attr("target","_blank").attr("rel","noopener noreferrer"),$(".article-sidebar__related").append(t)}))}$(".article-helpfulness__button--yes").text(""),$(".article-helpfulness__button--no").text("");const a=e=>{$(".article-helpfulness__title").addClass("form-finished").html(e),$(".article-helpfulness__button-container").hide(),$(".article-helpfulness__form").hide()};$(".article-helpfulness__button--yes").on("click",(e=>{e.currentTarget.classList.contains("article-voted")||a("Thank you for your opinion!")})),$(".article-helpfulness__button--no").on("click",(e=>{const t=window?.HelpCenter?.user?.email,a=$(".form__input-group");t&&a&&a[0].setAttribute("disabled",""),e.currentTarget.classList.contains("article-voted")||($(".article-helpfulness__title").text("What can we improve?"),$(".article-helpfulness__button-container").hide(),$(".article-helpfulness__form").show())})),document.querySelectorAll("table").forEach((e=>{const t=e.parentNode,a=document.createElement("div");a.classList.add("table-wrapper"),t.insertBefore(a,e),a.appendChild(e)})),HelpCenter&&HelpCenter.user&&HelpCenter.user.email&&$(".article-helpfulness__form input[name=email]").val(HelpCenter.user.email);const i='.article-helpfulness__form input[name="email"]',r='.article-helpfulness__form input[name="feedback"]',l=(e,t)=>{const a=$(e),i=a.val(),r=a.attr("name"),l=$(`.form__input-error[data-for=${r}]`),s=t(i);return s?(a.addClass("form__error"),l.text(s)):(a.removeClass("form__error"),l.text("")),{error:s,value:i}},s=()=>l(i,(e=>e&&/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)?void 0:"Please specify a valid email address")),n=()=>l(r,(e=>e?e.length<25?"Feedback must be at least 25 characters long":void 0:"Field is required")),o=()=>{const e=s(),t=n();return e.error||t.error?($(".article-helpfulness__form-submit").prop("disabled",!0),!1):($(".article-helpfulness__form-submit").prop("disabled",!1),!0)};$(i).on("keyup",o),$(i).on("blur",o),$(r).on("keyup",o),$(r).on("blur",o),$(".article-helpfulness__form-submit").on("click",(()=>{const e=s(),t=n();if(!o())return;let i=$(".article-header__title").first();i.length||(i=$("title"));const r=i.text(),l=$("article[data-id]").attr("data-id");var c;c=i=>{const s={utf8:"âœ“",authenticity_token:i,request:{ticket_form_id:360000267794,url:window.location.href,article_id:l,collaborators:[e.value],custom_fields:{360008860814:`https://help.ui.com/hc/en-us/articles/${$("article[data-id]").attr("data-id")}`},subject:`[FB] ${r}`,description:t.value,shortDescription:t.value.substring(0,Math.min(t.value.length,20))}};$.post("https://hooks.airtable.com/workflows/v1/genericWebhook/appJ6LCVsdSIUFsOY/wflxem6BN9DlDRQ7v/wtrT2PcPYoEGbIkKB",s,(()=>{a('Thank you for your feedback, it has been sent to our Help Center team. If you require technical support, please <a href="https://account.ui.com/mysupport">contact our support team </a>.')})),a('Thank you for your feedback, it has been sent to our Help Center team. If you require technical support, please <a href="https://account.ui.com/mysupport">contact our support team </a>.')},$.getJSON("https://help.ui.com/hc/api/internal/csrf_token.json",(e=>{const t=e&&e.current_session&&e.current_session.csrf_token;c(t)}))})),await(async()=>{try{const e=window.HelpCenter?.user?.role;let t=null;if(e&&"anonymous"!==e){const e=await fetch("https://sso.ui.com/api/sso/v1/user/self",{method:"GET",credentials:"include"});t=(await e.json()).uuid}const a=$("article[data-id]").attr("data-id"),i=window.location.href,r=$(".article-header__title").first().text(),l=$("ol.breadcrumbs > li").map((()=>$(this).text().trim())).get();if(a&&i&&r&&l){const e={article_id:a,article_url:i,article_name:r,article_categories:l};t&&(e.user_id=t),setTimeout((()=>{analytics.page("Article Viewed",e)}),1e4),$(document).on("click",".article-helpfulness__button--yes",(()=>{analytics.track("Article Rated",{...e,article_rating:"positive"})})).on("click",".article-helpfulness__button--no",(()=>{analytics.track("Article Rated",{...e,article_rating:"negative"})}))}}catch(e){console.error("Failed to fetch user id",e)}})()}));